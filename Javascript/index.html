<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>

	<link rel="stylesheet" href="content/stylesheet.css" />

    <script src="scripts/lib/require-2.1.20.min.js"></script>
    <script src="scripts/main.js"></script>
</head>
<body>
<div class="container">
	<input type="button" value="pause" data-bind="click: pause, enabled: isRunning" />

	<div class="log right">
		<b>Message Log</b>
		<!-- ko foreach: logContents -->
		<div data-bind="text: $data"></div>
		<!-- /ko -->
	</div>

	<div class="log">
		<b>Expectations</b>
		<!-- ko foreach: externalResults -->
		<div data-bind="text: meetsExpectations + ': ' + text, css: 'expect-' + meetsExpectations"></div>
		<!-- /ko -->
	</div>

	<!-- ko foreach: network.nodes -->
	<div class="node" data-bind="style: { top: display.y() + 'px', left: display.x() + 'px' }, css: { 'node-status-online': status() == 'Online', 'node-status-offline': status() == 'Offline' }">
		<div class="node-name" data-bind="text: display.description"></div>
		<div class="node-queue">
			Action:
			<!-- ko if: display.incomingValueAction -->
			<div data-bind="text: display.incomingValueAction" class="node-storage-slot"></div>
			<!-- /ko -->
			<div data-bind="ifnot: display.incomingValueAction, visible: display.incomingValueAction() == null" class="node-storage-slot-empty">n/a</div>
		</div>
		<div class="node-storage">
			Storage:
			<!-- ko foreach: storage -->
			<div data-bind="text: display.description" class="node-storage-slot"></div>
			<!-- /ko -->
			<div data-bind="if: storage().length == 0, visible: storage().length == 0" class="node-storage-slot-empty">empty</div>
		</div>
	</div>
	<!-- /ko -->

	<!-- ko foreach: network.messages -->
		<div data-bind="text: display.description, deliverMessage: $data" class="message" style="position: absolute;"></div>
	<!-- /ko -->

</div>
</body>
<script type="text/javascript">

require(["knockout",
		 "app/Constants",
		 "app/ViewModel" ],
function(ko,
		 CONST,
		 ViewModel ){
	
//	var vm = new ViewModel(3, CONST.NETWORK_STYLE.Any);
	var vm = new ViewModel(3, CONST.NETWORK_STYLE.NetworkSelectedHead);
	ko.applyBindings(vm);

	vm.startExternalMessageGeneration({
		"D0": [],
		"D1": [],
		"D2": [],
		"D3": [],
		"D4": [],
		"D5": [],
		"D6": [],
		"D7": []
	});
});

</script>
</html>
